<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Pizzaria Computacional ‚Äî Vers√£o Final</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- ======================= MENU INICIAL ======================= -->
<div id="menu-inicial">
    <div class="menu-card">
        <h1>üçï Pizzaria Computacional</h1>

        <button onclick="abrirSelecaoDificuldadeN1()" class="primary">N√≠vel 1 ‚Äî Criar Pizza</button>
        <br><br>

        <button onclick="abrirSelecaoDificuldade()">N√≠vel 2 ‚Äî Aut√≥mato Aleat√≥rio</button>
        <br><br>

        <button onclick="iniciarNivel(3)" class="primary">N√≠vel 3 ‚Äî Criar Aut√≥mato</button>
        <br><br>

        <button class="danger" onclick="sair()">Sair</button>
    </div>
</div>

<!-- ======================= MODAL DIFICULDADE N√çVEL 1 ======================= -->
<div id="modal-dificuldade-n1" class="modal hidden">
    <div class="modal-content">
        <h2>Dificuldade do N√≠vel 1</h2>
        <button onclick="escolherDificuldadeN1('facil')">F√°cil</button>
        <button onclick="escolherDificuldadeN1('medio')">M√©dio</button>
        <button onclick="escolherDificuldadeN1('dificil')">Dif√≠cil</button>

        <br><br>
        <button class="danger" onclick="voltarAoMenu()">Cancelar</button>
    </div>
</div>

<!-- ======================= MODAL DIFICULDADE ======================= -->
<div id="modal-dificuldade" class="modal hidden">
    <div class="modal-content">
        <h2>Dificuldade do Aut√≥mato</h2>
        <button onclick="escolherDificuldade('facil')">F√°cil</button>
        <button onclick="escolherDificuldade('medio')">M√©dio</button>
        <button onclick="escolherDificuldade('dificil')">Dif√≠cil</button>

        <br><br>
        <button class="danger" onclick="voltarAoMenu()">Cancelar</button>
    </div>
</div>

<!-- ======================= MODAL DIFICULDADE N√çVEL 3 ======================= -->
<div id="modal-dificuldade-n3" class="modal hidden">
    <div class="modal-content">
        <h2>Dificuldade do N√≠vel 3</h2>
        <button onclick="escolherDificuldadeN3('facil')">F√°cil</button>
        <button onclick="escolherDificuldadeN3('medio')">M√©dio</button>
        <button onclick="escolherDificuldadeN3('dificil')">Dif√≠cil</button>

        <br><br>
        <button class="danger" onclick="fecharModalDificuldadeN3()">Cancelar</button>
    </div>
</div>

<!-- ======================= MODAL TROCA DE N√çVEL ======================= -->
<div id="modal-troca-nivel" class="modal hidden">
    <div class="modal-content">
        <h2>Selecionar N√≠vel</h2>
        <button onclick="selecionarNivel(1)">N√≠vel 1 ‚Äî Criar Pizza</button>
        <button onclick="selecionarNivel(2)">N√≠vel 2 ‚Äî Aut√≥mato Aleat√≥rio</button>
        <button onclick="selecionarNivel(3)">N√≠vel 3 ‚Äî Criar Aut√≥mato</button>

        <br><br>
        <button class="danger" onclick="fecharModalTrocaNivel()">Cancelar</button>
    </div>
</div>

<!-- ======================= MODAL AJUDA ======================= -->
<div id="modal-ajuda" class="modal hidden">
    <div class="modal-content">
        <h2>Ajuda e Dicas</h2>
        <div id="conteudo-ajuda"></div>

        <br><br>
        <button class="danger" onclick="fecharAjuda()">Fechar</button>
    </div>
</div>

<!-- ======================= APLICA√á√ÉO PRINCIPAL ======================= -->
<div id="app" class="hidden">

    <div class="center-buttons">
        <button onclick="trocarNivel()">Trocar N√≠vel</button>
        <button onclick="trocarDificuldade()">Trocar Dificuldade</button>
        <button onclick="mostrarAjuda()">Ajuda/Dicas</button>
        <button onclick="reiniciar()" class="danger">Reiniciar</button>
        <button onclick="sair()">Sair</button>
    </div>

    <h1 id="titulo-nivel"></h1>

        <!-- Express√£o Regular do Automato (s√≥ para n√≠vel 1) -->
        <div id="regex-box" class="box">
            <h2>Express√£o Regular</h2>
            <pre id="regex-display">massa (molho queijo | queijo) (pimentos|fiambre|azeitonas|cogumelos|bacon|milho|cebola|oregano|ananas)* pagar</pre>
        </div>

    <!-- =============================================================
         N√çVEL 1 ‚Äî CRIA√á√ÉO DE PIZZA (massa obrigat√≥ria + distratores)
    =============================================================== -->
    <div id="nivel1" class="hidden">

        <div class="box">
            <h2>Ingredientes</h2>
            <div id="ingredientes-n1" class="ingredientes-grid"></div>
        </div>

        <div class="box">
            <h2>Montagem</h2>
            <div id="dropzone-n1" class="dropzone">
                <svg width="380" height="380">
                    <circle cx="190" cy="190" r="160" fill="#e8c190"></circle>
                    <g id="toppings-n1"></g>
                </svg>
            </div>
        </div>

        <div class="box">
            <h2>Progresso</h2>
            <ul class="progresso-lista">
                <li id="p1">Come√ßar pela massa</li>
                <li id="p2">Adicionar molho / queijo</li>
                <li id="p3">Adicionar toppings</li>
                <li id="p4">Preparar pagamento</li>
                <li id="p5">Pagamento</li>
                <li id="p6">Pizza completa</li>
            </ul>
        </div>

        <div class="box">
            <h2>Valida√ß√£o</h2>
            <ul id="log-n1" class="log"></ul>
        </div>

        <div class="center-buttons">
            <button onclick="efetuarPagamentoN1()" class="primary">Pagar</button>
            <button onclick="finalizarPizzaN1()">Finalizar Pizza</button>
        </div>

        <!-- Formaliza√ß√£o do aut√≥mato -->
        <div id="formal-area-n1" class="box">
            <h2>Formaliza√ß√£o</h2>
            <pre id="formal-text-n1" class="formal-box"></pre>

            <h2>Tabela Œ¥</h2>
            <table id="tabela-delta-n1" class="delta-table"></table>
        </div>

    </div>

    <!-- =============================================================
         N√çVEL 2 ‚Äî AUT√ìMATO ALEAT√ìRIO (circular 750x750)
    =============================================================== -->
    <div id="nivel2" class="hidden">

        <div class="box">
            <h2>Aut√≥mato Gerado</h2>

            <!-- SVG ampliado para 1600x800 com scroll -->
            <div id="fsm-container" style="width: 100%; height: 600px; overflow: auto; border: 3px solid #ffb974; border-radius: 16px; background: #2d1a12;">
                <svg id="fsm-svg" width="1600" height="800" style="display: block;">
                    <g id="fsm-trans" transform="scale(1) translate(0,0)"></g>
                    <g id="fsm-states" transform="scale(1) translate(0,0)"></g>
                </svg>
            </div>
        </div>

        <div class="box">
            <h2>Ingredientes</h2>
            <div id="ingredientes-n2" class="ingredientes-grid"></div>
        </div>

        <div class="box">
            <h2>Pizza Constru√≠da</h2>
            <div id="dropzone-n2" class="dropzone">
                <svg width="380" height="380">
                    <circle cx="190" cy="190" r="160" fill="#e8c190"></circle>
                    <g id="toppings-n2"></g>
                </svg>
            </div>
        </div>

        <div class="box">
            <h2>Registo do Processo</h2>
            <ul id="log-n2" class="log"></ul>
        </div>

        <!-- Formaliza√ß√£o do aut√≥mato -->
        <div id="formal-area" class="box">
            <h2>Formaliza√ß√£o</h2>
            <pre id="formal-text" class="formal-box"></pre>

            <h2>Tabela Œ¥</h2>
            <table id="tabela-delta" class="delta-table"></table>
        </div>

    </div>

    <!-- =============================================================
         N√çVEL 3 ‚Äî CRIAR AUT√ìMATO
    =============================================================== -->
    <div id="nivel3" class="hidden">

        <div class="box">
            <h2>Sequ√™ncia de Ingredientes</h2>
            <div id="sequencia-n3" class="sequencia-container"></div>
        </div>

        <div class="box">
            <h2>Definir Aut√≥mato</h2>
            <div>
                <label>N√∫mero de Estados: <input type="number" id="num-estados" min="1" max="10" value="4"></label>
                <button onclick="gerarEstados()">Gerar Estados</button>
            </div>
            <div id="estados-config">
                <p>Estado Inicial: <select id="estado-inicial"></select></p>
                <p>Estados Finais: <div id="estados-finais"></div></p>
            </div>
            <h3>Transi√ß√µes</h3>
            <div id="transicoes-config">
                <button onclick="adicionarTransicao()">Adicionar Transi√ß√£o</button>
                <table id="tabela-transicoes" class="delta-table">
                    <thead>
                        <tr>
                            <th>De</th>
                            <th>Token</th>
                            <th>Para</th>
                            <th>A√ß√£o</th>
                        </tr>
                    </thead>
                    <tbody id="tbody-transicoes"></tbody>
                </table>
            </div>
        </div>

        <div class="box">
            <h2>Diagrama do Aut√≥mato</h2>
            <div id="fsm-container-n3" style="width: 100%; height: 400px; overflow: auto; border: 3px solid #ffb974; border-radius: 16px; background: #2d1a12;">
                <svg id="fsm-svg-n3" width="1400" height="400" style="display: block;">
                    <g id="fsm-trans-n3" transform="scale(1) translate(0,0)"></g>
                    <g id="fsm-states-n3" transform="scale(1) translate(0,0)"></g>
                </svg>
            </div>
        </div>

        <div class="box">
            <h2>Valida√ß√£o</h2>
            <ul id="log-n3" class="log"></ul>
        </div>

        <div class="center-buttons">
            <button onclick="validarAutomatoN3()" class="primary">Validar Aut√≥mato</button>
        </div>

    </div>

    <!-- =============================================================
         ESQUEMA DOS AUT√ìMATOS DO N√çVEL 2
    =============================================================== -->
    <div id="esquema" class="hidden">

        <h1>Esquema dos Aut√¥matos ‚Äî N√≠vel 2</h1>

        <div class="box">
            <h2>Dificuldade F√°cil (4 Estados)</h2>
            <p>Estrutura linear: q0 ‚Üí q1 ‚Üí q2 ‚Üí q3</p>
            <svg width="600" height="200" class="fsm-diagram">
                <g id="easy-fsm"></g>
            </svg>
        </div>

        <div class="box">
            <h2>Dificuldade M√©dia (6 Estados)</h2>
            <p>Estrutura com ramifica√ß√µes: cada estado pode levar ao pr√≥ximo ou ao pr√≥ximo+1</p>
            <svg width="800" height="250" class="fsm-diagram">
                <g id="medium-fsm"></g>
            </svg>
        </div>

        <div class="box">
            <h2>Dificuldade Dif√≠cil (8 Estados)</h2>
            <p>Estrutura complexa: ramifica√ß√µes e possivelmente transi√ß√µes para tr√°s</p>
            <svg width="1000" height="300" class="fsm-diagram">
                <g id="hard-fsm"></g>
            </svg>
        </div>

        <div class="box">
            <h2>Ingredientes Utilizados</h2>
            <div id="ingredientes-esquema" class="ingredientes-grid"></div>
        </div>

        <div class="center-buttons">
            <button onclick="voltarAoMenu()">Voltar ao Menu</button>
        </div>

    </div>
</div>

<script src="script.js"></script>
</body>
</html>
